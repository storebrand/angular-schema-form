angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(e,t,n){var a=function(t,a,i){if("string"===a.type&&"date-format"===a.format){var o=e.stdFormObj(t,a,i);return o.key=i.path,o.type="datepicker",i.lookup[n.stringify(i.path)]=o,o}};e.defaults.string.unshift(a)}]),angular.module("schemaForm").directive("stbDatepicker",["$timeout",function(e){"use strict";return{restrict:"A",require:"ngModel",priority:1,link:function(t,n,a,i){function o(){var e=d.val(),t=p.val();return r(e,t)}function r(e,t){return moment(e,"DD.MM.YY").format("YYYY-MM-DD")+(D?"T"+moment(t,"HH:mm").format("HH:mm:ss"):"")}function m(e){return(e||"").replace(/^(\d{1}):/,"0$1:")}function u(){return moment(i.$viewValue).format("HH:mm")}function f(){return moment(i.$viewValue).format("DD.MM.YY")}if(n.unbind("input").unbind("keydown").unbind("change"),$.fn.datetimepicker){var c=moment(),l=t.$eval(a.monthlyDifference),d=$(n).find("input"),p=$(n).find("select"),s=a.defaultTime||"12:00",v=a.defaultDate||moment(),D=Boolean(a.showTime);if($(n).datetimepicker({pickTime:!1,language:"nn",format:"DD.MM.YY",minDate:t.$eval(a.minDate)||t.$eval(a.disableUntilToday)&&c.toDate(),maxDate:t.$eval(a.maxDate)||l&&moment(c).add(l,"Month").toDate()}).on("dp.change",function(){t.$apply(function(){i.$setViewValue(o())})}).on("dp.error",function(){t.$apply(function(){i.$setViewValue(void 0)})}),t.$watch(t.keyModelName,function(){e(function(){p.val(i.$viewValue?u():s),$(n).data("DateTimePicker").setDate(i.$viewValue?f():v)})}),D){for(var h=24,g=0;h>g;g++)p.append("<option>"+m(g+":00")+"</option><option>"+m(g+":30")+"</option>");p.change(function(){t.$apply(function(){i.$setViewValue(o())})})}}}}}]);