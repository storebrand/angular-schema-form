angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(e,r,a){"use strict";var n=function(r,n,u){if("string"===n.type&&"json"===n.format){var i=e.stdFormObj(r,n,u);return i.key=u.path,i.type="currency",u.lookup[a.stringify(u.path)]=i,i}};e.defaults.string.unshift(n)}]),angular.module("schemaForm").directive("stbCurrency",function(){"use strict";return{restrict:"A",require:"ngModel",priority:0,link:function(e,r,a,n){e.value={};var u=_.last(e.$eval(a.name));try{n.$modelValue&&(e.value=JSON.parse(n.$modelValue))}catch(i){console.log("Error parsing JSON",i)}e.$watch(e.keyModelName,function(){e.value=n.$viewValue?JSON.parse(n.$viewValue):{currency:(e.currencies[0]||{}).value}}),e.onSumChange=function(){e.value&&(e.model[u]=JSON.stringify(e.value)),n.$setViewValue(JSON.stringify(e.value))},e.onCurrChange=function(){e.value&&(e.model[u]=JSON.stringify(e.value))},e.currencies=a.currencies?JSON.parse(a.currencies):[]}}});