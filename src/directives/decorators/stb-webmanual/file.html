<div  class="form-group uploader label-wrapper"
      ng-show="showCondition()"
      ng-init="initFileUploader(); params={id: form.key+'ModalDlg', submit: removeFile, texts: form.confirmDelete.texts}">

    <ul class="filetable" ng-if="$$value$$">
        <li class="file" ng-repeat="item in $$value$$" ng-init="fileName = item.fileName; extension=getExtensionFromFileName(fileName)">
            <span class="icon">
                <span class="" ng-bind="extension" ng-class="{ 'stb-color-sprite-small': (extension === 'pdf'), pdf: (extension === 'pdf') }"></span>
            </span>
            <span class="filename" ng-bind="fileName"></span>

            <span ng-if="item.uploaderFileItem && item.uploaderFileItem.isUploading" class="upload-progress">Laster opp... {{item.uploaderFileItem.progress}}%</span>
            <span ng-if="item.uploaderFileItem && item.uploaderFileItem.isUploaded && !item.uploaderFileItem.isError" class="uploaded">Lastet opp</span>
            <span ng-if="item.uploaderFileItem && item.uploaderFileItem.isError" class="upload-error">Feil</span>

            <span
              class="delete"
              ng-attr-data-toggle="{{'modal'}}"
              ng-attr-data-target="#{{params.id}}"
              ng-click="confirmOnFileRemove(item)"><span class="stb-sprite-small remove red"></span>Fjern</span>
        </li>
    </ul>

    <ul class="filetable" ng-if="fileUploadError">
        <li class="file"><span class="upload-error">{{fileUploadError.title}}</span></li>
    </ul>

    <input type="file"
           class="hidden"
           name="{{form.key}}"
           id="{{form.key}}"
           nv-file-select
           uploader="uploader"
           multiple />

    <label for="{{form.key}}" class="link">{{form.title}}</label>

    <span ng-show="!!form.confirmDelete">
        <div
            sf-modal-dialog
            params="params">
        </div>
    </span>

</div>
